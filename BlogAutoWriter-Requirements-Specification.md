# BlogAutoWriter-Requirements-Specification

**プロジェクト名**：BlogAutoWriter\
**バージョン**：1.1\
**作成日**：2025年6月13日\
**作成者**：Murasan

---

## 1. はじめに

### 1.1 背景

- 手動での記事執筆には時間とコストがかかる。
- OpenAIのLLMを活用し、定型的なブログ記事の自動執筆で業務効率化を図る。

### 1.2 目的

- ターミナルで入力したタイトルリストをもとに、LLMで自動生成された記事をMarkdown形式で出力する。
- 文体や読者設定などをカスタマイズ可能にし、多様なニーズに対応する。

### 1.3 範囲

- CLIベースのアプリケーション
- タイトル入力 → カスタムプロンプト設定 → 記事生成 → Markdown出力
- OpenAI API連携、ログ管理、エラー処理を含む

---

## 2. 用語定義

| 用語           | 定義                              |
| ------------ | ------------------------------- |
| LLM          | Large Language Model（GPTシリーズなど） |
| プロンプト        | LLMに送る指示文。文体・読者設定を含む            |
| タイトルリスト      | 自動生成対象の記事タイトルを一覧化した入力データ        |
| Markdownファイル | 記事出力フォーマット（`.md`拡張子）            |

---

## 3. システム概要

```
[ユーザー（端末）] → [CLIアプリ（Python）] → [OpenAI API] → [Markdownファイル出力]
                                                 ↘ [ログ]
```

---

## 4. 機能要件

### 4.1 タイトルリスト入力機能（CLI）

- 入力方法：起動後、プロンプトでタイトルを1行ずつ入力
  - 空行または`END`で入力終了
- 検証：空白行連続時の警告、重複タイトルの通知と再入力促し

### 4.2 カスタムプロンプト設定機能

- 設定項目：文体・スタンス、目標読者、記事長さ（見出し数や文字数目安）
- 永続化：JSON/YAMLテンプレートの保存・読み込み

### 4.3 記事生成機能

- タイトルごとにプロンプト生成→OpenAI API呼び出し→応答をMarkdown整形
- モデル選択：デフォルトは `o4-mini`、必要に応じて `gpt-3.5-turbo` や `gpt-4` を指定可能
- 並列実行：最大10スレッド対応

### 4.4 Markdownファイル出力機能

- ファイル命名規則：`{YYYYMMDD}_{タイトルスラッグ}.md`
- 保存先：`--outdir`指定フォルダ（初期値：`./output`）
- 内容：タイトル（`#`）、見出し（`##`）、本文、リスト、コードブロック

### 4.5 ログ管理機能

- ログ出力：処理開始/完了、各タイトルのステータス、エラー詳細
- レベル：INFO、WARNING、ERROR
- 保存形式：テキスト（.log）およびオプションでJSON

### 4.6 エラーハンドリング

- API呼び出しリトライ（最大3回）、レートリミット超過時の待機
- 入力異常時のユーザー通知

---

## 5. 非機能要件

- **パフォーマンス**：タイトル1件あたり～5秒（API応答依存）
- **セキュリティ**：APIキーは環境変数管理、依存ライブラリ脆弱性チェック
- **可用性**：途中中断後の再開機能、オプションで自動バックアップ
- **拡張性**：他モデル対応、将来的なWeb API化やGUI化
- **保守性**：モジュール化、ユニットテストカバレッジ80%以上

---

## 6. 外部インターフェース要件

### 6.1 CLIインターフェース

```
$ python blog_auto_writer.py [--config <config.json>] [--outdir <出力先>]
```

1. タイトル入力プロンプト
2. 設定読み込み・確認
3. Enterで生成開始

### 6.2 ファイルI/O

- 設定ファイル：JSON/YAML
- 出力：Markdown（.md）、ログ（.log/JSON）

### 6.3 OpenAI API

- エンドポイント：chat.completions
- パラメータ：model, temperature, max\_tokens など

---

## 7. データ要件

- タイトル1件あたり最大200文字
- 設定ファイルはUTF-8のJSON/YAML
- 出力ファイルはUTF-8エンコード

---

## 8. 制約条件

- Python 3.8以上
- `OPENAI_API_KEY`を環境変数に設定
- ネットワーク接続必須
- ターミナル（TTY）環境で動作

---

## 9. 運用・保守

- バージョン管理：GitHub
- ドキュメント：README、セットアップ手順
- テスト：ローカルおよびCI（GitHub Actions）
- サポート：Issue管理、定期アップデート

---

